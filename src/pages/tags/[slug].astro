---
import {getCollection} from "astro:content";
import Article from "../../components/Article.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
export async function getStaticPaths() {
    const tags = await getCollection("tags");
    return tags.map((tag) => {
        return {
            params: {slug: tag.id},
            props: {tag}
        }
    })
}
const {tag} = Astro.props;
const title = `Метка: ${tag.data.name}`
const articlesByTag = await getCollection("articles", ({data}) => {
    return data.tags && data.tags.map(tag => tag.id).includes(tag.data.slug);
})
---

<BaseLayout title={title}>
    <Header />
    <main class="container">
        <h1 class="title">{title}</h1>

        {articlesByTag.map((article) => {
            return <Article id={article.id} article={article.data} />
        })}
    </main>
    <Footer />
</BaseLayout>

<style>
    .title {
        font-size: 2.5rem;
        margin-block-end: 3rem;
    }
</style>
